# IPPAN Node Configuration
# Copy this file to ippan.env and modify as needed
# DO NOT commit ippan.env to version control!

# ============================================================================
# Node Identity (REQUIRED)
# ============================================================================

NODE_ID=ippan_node_001
# VALIDATOR_ID must be a 64-character hexadecimal string
VALIDATOR_ID=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ============================================================================
# Network Configuration
# ============================================================================

# RPC Server
RPC_HOST=0.0.0.0
RPC_PORT=8080

# P2P Network
P2P_HOST=0.0.0.0
P2P_PORT=9000

# ============================================================================
# Storage Configuration
# ============================================================================

DATA_DIR=/var/lib/ippan
DB_PATH=/var/lib/ippan/db

# ============================================================================
# Consensus Configuration
# ============================================================================

SLOT_DURATION_MS=1000
MAX_TRANSACTIONS_PER_BLOCK=1000
BLOCK_REWARD=10
FINALIZATION_INTERVAL_MS=200

# ============================================================================
# P2P Configuration
# ============================================================================

# Bootstrap Nodes (comma-separated URLs)
# For local dev: leave empty
# For production: use known node URLs
BOOTSTRAP_NODES=http://188.245.97.41:9000,http://135.181.145.174:9000

# Optional override alias used in production deployment templates
# P2P_BOOTNODES=http://188.245.97.41:9000,http://135.181.145.174:9000

# Peer Management
MAX_PEERS=50
PEER_DISCOVERY_INTERVAL_SECS=30
PEER_ANNOUNCE_INTERVAL_SECS=60

# P2P Discovery Intervals (alternative naming)
P2P_DISCOVERY_INTERVAL_SECS=30
P2P_ANNOUNCE_INTERVAL_SECS=60

# Gossipsub Topics
BLOCK_TOPIC=ippan-blocks
TX_TOPIC=ippan-transactions

# ============================================================================
# P2P NAT Traversal & Discovery
# ============================================================================

# Public hostname or IP (for nodes behind NAT)
# Leave empty for automatic detection
P2P_PUBLIC_HOST=

# Enable UPnP for automatic port forwarding
P2P_ENABLE_UPNP=false

# External IP detection services (comma-separated)
P2P_EXTERNAL_IP_SERVICES=https://api.ipify.org,https://ifconfig.me/ip

# ============================================================================
# Layer 2 Configuration
# ============================================================================

L2_MAX_COMMIT_SIZE=16384
L2_MIN_EPOCH_GAP_MS=250
L2_CHALLENGE_WINDOW_MS=60000
L2_DA_MODE=external
L2_MAX_L2_COUNT=100

# ============================================================================
# Logging Configuration
# ============================================================================

LOG_LEVEL=info  # Options: trace, debug, info, warn, error
LOG_FORMAT=json  # Options: json, pretty

# ============================================================================
# Development/Testing
# ============================================================================

# WARNING: Only set DEV_MODE=true in development!
DEV_MODE=false
ENABLE_SECURITY=true

# Metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================================================
# Security Configuration
# ============================================================================

# TLS Configuration (recommended for production)
ENABLE_TLS=false
TLS_CERT_PATH=
TLS_KEY_PATH=

# ============================================================================
# Performance Configuration
# ============================================================================

MAX_CONNECTIONS=100
CONNECTION_TIMEOUT_MS=30000
REQUEST_TIMEOUT_MS=10000

# ============================================================================
# Notes
# ============================================================================

# 1. For production, ensure NODE_ID and VALIDATOR_ID are unique per node
# 2. VALIDATOR_ID must be exactly 64 hexadecimal characters
# 3. Set appropriate BOOTSTRAP_NODES for your network
# 4. Enable TLS in production with valid certificates
# 5. Use P2P_ENABLE_UPNP=true if behind NAT/firewall
# 6. Set P2P_PUBLIC_HOST if automatic detection doesn't work
# 7. Never commit the actual ippan.env file to version control!
